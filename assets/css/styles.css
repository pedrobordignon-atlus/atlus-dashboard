:root{
  --navy:#0a1b2b; --navy-2:#0f2436; --panel:#0e2234; --border:#15354f;
  --text:#e9f1fb; --text-dim:#a7bfd9; --blue:#0077c8; --gold:#ffb81c; --green:#19c37d;
  --coral:#ff6b6b; --purple:#7c5cff; --teal:#2dd4bf; --sky:#38bdf8;
}
*{box-sizing:border-box}
html, body { height: 100%; }

body{
  /* Somente gradientes + cor base (sem imagem global) */
  background:
    radial-gradient(900px 600px at 12% 10%, rgba(0,119,200,.12), transparent 70%),
    radial-gradient(900px 600px at 88% 12%, rgba(255,184,28,.14), transparent 70%),
    var(--navy);
  color: var(--text);
  font-family: Inter, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  position: relative;
  overflow-x: hidden;
}

/* Logo de fundo visível apenas na Home */
#view-home::after{
  content: "";
  position: fixed;
  bottom: 20px;                 /* um pouco mais abaixo */
  left: 50%;
  transform: translateX(-50%);
  width: 680px;
  height: 680px;
  background: url('../../atlus-bg.png') no-repeat center bottom / contain;
  opacity: 0.06;                /* MAIS transparente */
  pointer-events: none;
  z-index: 0;
}

/* Garante que as outras views NÃO mostrem a logo */
#view-atlus::after,
#view-bonus::after,
#view-subs::after{
  content: none;
}

/* REMOVIDO: isso causava a “segunda” logo mais forte
body::before{
  content:""; position:fixed; top:50%; left:50%;
  width:680px; height:680px; transform:translate(-50%,-50%);
  background:url('./Atlus_logo_files/favicon.png') no-repeat center center;
  background-size:contain; opacity:0.08; pointer-events:none; z-index:0;
}
*/

/* Grade suave no fundo (mantida) */
body::after{
  content:""; position:fixed; inset:0;
  background-image:
    linear-gradient(rgba(255,184,28,0.10) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,119,200,0.12) 1px, transparent 1px);
  background-size: 46px 46px, 46px 46px; background-position: 0 0, 0 0;
  opacity:0.35; pointer-events:none; z-index:0;
}

header, main { position: relative; z-index: 1; }

header{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 18px; background:rgba(10,27,43,.85); backdrop-filter: blur(6px);
  border-bottom:1px solid var(--border);
}
.brand{display:flex;align-items:center;gap:12px;font-weight:700}
.logo{width:40px;height:40px;display:flex;align-items:center;justify-content:center}
.logo img{height:100%;width:auto;object-fit:contain}

.btn{padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#0a2236;color:var(--text);cursor:pointer}
.btn.primary{background:#0077c8;border-color:transparent;color:#fff;font-weight:600}
.btn.link{background:transparent;border:1px solid var(--border);color:#dbeafe}
.muted{color:var(--text-dim)}
.input, select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#08192a;color:var(--text)}

.container{max-width:1400px;margin:0 auto;padding:24px;display:grid;gap:28px}
.panel{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:18px 20px}
.row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}

.hero{padding:22px;background:rgba(10,27,43,.55);border:1px solid var(--border);border-radius:16px;text-align:center;display:flex;flex-direction:column;align-items:center}
.cards{display:grid;grid-template-columns:repeat(3,1fr);gap:22px}
.card{background:#081b2b;border:1px solid var(--border);border-radius:16px;padding:18px;display:grid;gap:10px}
.pill{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid var(--border);color:var(--text-dim)}
@media (max-width:1100px){.cards{grid-template-columns:1fr}}

.kpis{display:grid;grid-template-columns:repeat(6,1fr);gap:14px}
@media(max-width:1100px){ .kpis{grid-template-columns:repeat(2,1fr)} }
.kpi{background:#081b2b;border:1px solid var(--border);border-radius:14px;padding:12px}
.kpi .label{font-size:12px;color:var(--text-dim)}
.kpi .value{font-size:22px;font-weight:700;display:flex;align-items:center;gap:8px}
.kpi .dot{width:8px;height:8px;border-radius:999px;display:inline-block;opacity:.6}
.dot.blue{background:#0077c8} .dot.gold{background:#ffb81c} .dot.green{background:#19c37d}

.filters{display:grid;grid-template-columns:1.2fr 1.2fr 1.2fr auto;gap:12px}
@media(max-width:1100px){ .filters{grid-template-columns:1fr} }

.grid-2{display:grid;grid-template-columns:1.6fr 1fr;gap:24px;align-items:start}
@media(max-width:1100px){.grid-2{grid-template-columns:1fr}}

.noteTitle{font-weight:700;margin-bottom:6px}
.note{border-left:3px solid var(--blue);padding-left:12px}
.stack{display:grid;gap:18px}
.backRow{display:flex;align-items:center;gap:8px}
#if-admin{ display:none }
#reloadBtn { display:none !important; }

.admin-only{ display:none; }
.if-admin{ display:none; }
.if-guest{ display:inline-flex; }
body.admin .admin-only{ display:block; }
body.admin .if-admin{ display:inline-flex; }
body.admin .if-guest{ display:none; }

#adminLoginBox{
  position: fixed; inset: 0; display: none; place-items: center;
  background: rgba(0,0,0,.45); z-index: 1000;
}
#adminLoginCard{
  width: 320px; background: var(--panel); border:1px solid var(--border);
  border-radius: 16px; padding: 16px; display: grid; gap: 10px;
}

/* ---------- espaços p/ gráficos ---------- */
.panel.chart-320{ height:320px; }
.panel.chart-380{ height:380px; }
.panel.chart-420{ height:420px; }
.panel.chart-460{ height:460px; }
.panel.chart-480{ height:480px; }

.panel > canvas{ width:100% !important; height:100% !important; display:block; }

.stack-charts{ display:grid; grid-template-columns:1fr; gap:32px; }
.container{ gap:32px; }
.panel{ padding:24px 26px 20px; }

.chart-340 canvas{ height:340px !important; }
.chart-360 canvas{ height:360px !important; }

@media (max-width:700px){
  header{ padding:10px 12px; }
  .container{ padding:14px; gap:16px; }
  .panel{ padding:16px 16px 14px; border-radius:12px; }
  .cards{ grid-template-columns:1fr; gap:14px; }
  .filters{ grid-template-columns:1fr; gap:10px; }
  .kpis{ grid-template-columns:1fr; gap:10px; }
  .grid-2{ grid-template-columns:1fr !important; gap:16px; }
  .stack{ gap:14px; }
  .stack-charts{ gap:18px; }
  .panel.chart-480 > canvas,
  .panel.chart-460 > canvas,
  .panel.chart-420 > canvas{ height:300px !important; }
  .panel.chart-380 > canvas,
  .panel.chart-360 > canvas,
  .panel.chart-340 > canvas{ height:260px !important; }
  .panel > div[style*="font-weight:700"]{ font-size:14px !important; }
  #btTable, #svcTable{ overflow-x:auto; }
}

/* === Feedback FAB === */
.fab{
  position: fixed; right: 18px; bottom: 18px; z-index: 60;
  padding: 12px 14px; border-radius: 999px; border: 1px solid var(--border);
  background: var(--blue); color: #fff; font-weight: 600; cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
.fab:hover{ filter: brightness(1.05); }

/* === Modal === */
.fb-modal{
  position: fixed; inset: 0; display: none; place-items: center; z-index: 80;
  background: rgba(0,0,0,.45);
}
.fb-modal.show{ display: grid; }
.fb-card{
  width: min(560px, 94vw);
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  display: grid; gap: 12px;
}
.fb-head{ display:flex; align-items:center; justify-content:space-between; }
.fb-close{
  background: transparent; border: 1px solid var(--border); color: var(--text);
  width: 32px; height: 32px; border-radius: 8px; cursor: pointer;
}
.fb-form{ display: grid; gap: 10px; }
.fb-form label{ display: grid; gap: 6px; font-size: 14px; color: var(--text-dim); }
.fb-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top: 4px; }
